<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="newform.css"> 
    <title>House Price Predictor</title>
</head>
<body>
    <div class="container">
        <h1>House Price Predictor</h1>
        <form id="housePriceForm">
            <div class="form-group">
                <label for="houseType">What Type of House do you want?</label>
                <select id="houseType" name="houseType">
                    <option value="apartment">Apartment</option>
                    <option value="house">House</option>
                    <option value="mansion">Mansion</option>
                </select>
            </div>
            <div class="form-group">
                <label for="housePrice">What Kind of House do you want?</label>
                <select id="housePrice" name="housePrice">
                    <option value="cheap">Cheap</option>
                    <option value="normal">Normal</option>
                    <option value="above-average">Above-average</option>
                    <option value="luxury">Luxury</option>
                </select>
            </div>
            <div class="form-group">
                <label for="location">Select Location:</label>
                <select id="location" name="location">
                    <option value="cheapNeighborhood">Anywhere Cheap</option>
                    <option value="goodNeighborhood">Good Neighborhood</option>
                    <option value="greatViewLocation">Great View Location</option>
                    <option value="richNeighborhood">Rich Neighborhood</option>
                </select>
            </div>
            
                <label>Select Amenities:</label>
                <div class="amenities-checkboxes">
                    <input type="checkbox" id="pool" name="amenities" value="pool">
                    <span for="pool">Pool</span>
                    <br>
                    <input type="checkbox" id="gym" name="amenities" value="gym">
                    <span for="gym">Gym</span>
                    <br>
                    <input type="checkbox" id="fireplace" name="amenities" value="fireplace">
                    <span for="fireplace">Fireplace</span>
                    <br>
                    <input type="checkbox" id="yard" name="amenities" value="yard">
                    <span for="yard">Yard</span>
                    <br>
                    <input type="checkbox" id="garage" name="amenities" value="garage">
                    <span for="garage">Garage</span>
                </div>
            
            <div class="form-group">
                <button type="submit" id="submit">See Results</button>
            </div>
        </form>
        <!-- <img src="https://i.redd.it/yghh0xgwxvx71.jpg" alt="" height="500px" width="500px"> -->
        <!-- <img src="https://www.tutorialspoint.com/assets/questions/media/426142-1668760872.png" alt="" height="200px" width="200px"> -->
    </div>
    

    <!-- <script>
        document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("housePriceForm"); // Replace "housePriceForm" with your form's actual ID

  form.addEventListener("submit", function (event) {
    event.preventDefault(); // Prevent the form from submitting and reloading the page

    // Access form data using the form elements' "name" attributes
    const houseType = form.elements["houseType"].value;
    const housePrice = form.elements["housePrice"].value;
    const location = form.elements["location"].value;

    // Access selected amenities (checkboxes)
    const amenitiesCheckboxes = form.elements["amenities"];
    const selectedAmenities = Array.from(amenitiesCheckboxes)
      .filter((checkbox) => checkbox.checked)
      .map((checkbox) => checkbox.value);

    // Display the retrieved data (you can modify this part as needed)
    console.log("House Type:", houseType);
    console.log("House Price:", housePrice);
    console.log("Location:", location);
    console.log("Selected Amenities:", selectedAmenities);

   // Function to retrieve form data
function getFormData() {
    return {
        houseType,
        priceType,
        location,
        amenities,
    };
}

// Function to send form data to Python backend
function submitForm() {
    const formData = getFormData();
    console.log("formdata:", formData);

    fetch('/api/house-predictor', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(formData)
    })
    .then(response => response.json())
    .then(data => {
        // Handle the response data here
        console.log(data);
    })
    .catch(error => {
        console.error('Error:', error);
    });
}

// Add an event listener to the form submit button
// document.getElementById("submit").addEventListener("click", submitForm);

  });
});

    </script> -->
    <script>

        document.addEventListener("DOMContentLoaded", function () {
  // Get the form element by ID within the event handler
  const form = document.getElementById("housePriceForm");
        
        // Function to retrieve form data
function getFormData() {

  const houseType = form.elements["houseType"].value;
    const housePrice = form.elements["housePrice"].value;
    const location = form.elements["location"].value;

  const amenitiesCheckboxes = document.querySelectorAll(".amenities-checkbox");
  const amenities = Array.from(amenitiesCheckboxes)
    .filter(checkbox => checkbox.checked)
    .map(checkbox => checkbox.value);

  return {
    houseType,
    priceType,
    location,
    amenities,
  };
}

// Function to send form data to Python backend
function submitForm(event) {
  event.preventDefault(); // Prevent the default form submission behavior

  const formData = getFormData();

  // Display the data being sent to the server in the console
  console.log('Data being sent to server:', formData);

  fetch('/api/house-predictor', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(formData)
  })
  .then(response => response.json())
  .then(data => {
    // Handle the response data here (e.g., update UI with prediction results)
    console.log(data);

    // Example: Update a div element with the predicted price
    const predictedPriceElement = document.getElementById("predicted-price");
    predictedPriceElement.textContent = `Predicted Price: Rs ${data.predicted_price}`;
  })
  .catch(error => {
    console.error('Error:', error);
  });
}

// Add an event listener to the form submit button
document.addEventListener("DOMContentLoaded", function () {
  const form = document.getElementById("housePriceForm");
  form.addEventListener("submit", submitForm); // Attach the event listener to the form submit event
});

});
    </script>
</body>
</html>
